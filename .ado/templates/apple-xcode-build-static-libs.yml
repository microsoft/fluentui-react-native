#
# Build the FluentUI React Native Test App in different configurations
#
steps:
  # macOS Framework Debug
  - template: apple-xcode-build.yml
    parameters:
      xcode_sdk: 'macosx'
      xcode_workspacePath: 'apps/macos/src/FluentUITester.xcworkspace'
      xcode_actions: 'build'
      xcode_scheme: 'ReactTestApp'
      xcode_configuration: 'Debug'
      xcode_extraArgs: '-xcconfig $(Build.Repository.LocalPath)/.ado/xcconfig/publish_overrides.xcconfig'

  # macOS Framework Release
  - template: apple-xcode-build.yml
    parameters:
      xcode_sdk: 'macosx'
      xcode_workspacePath: 'apps/macos/src/FluentUITester.xcworkspace'
      xcode_actions: 'build'
      xcode_scheme: 'ReactTestApp'
      xcode_configuration: 'Release'
      xcode_extraArgs: '-xcconfig $(Build.Repository.LocalPath)/.ado/xcconfig/publish_overrides.xcconfig'

  # iphonesimulator Library Debug
  - template: apple-xcode-build.yml
    parameters:
      xcode_sdk: 'iphonesimulator'
      xcode_workspacePath: 'apps/ios/src/FluentUITester.xcworkspace'
      xcode_actions: 'build'
      xcode_scheme: 'ReactTestApp'
      xcode_configuration: 'Debug'
      xcode_extraArgs: '-xcconfig $(Build.Repository.LocalPath)/.ado/xcconfig/publish_overrides.xcconfig'

  # iphonesimulator Library Release
  - template: apple-xcode-build.yml
    parameters:
      xcode_sdk: 'iphonesimulator'
      xcode_workspacePath: 'apps/ios/src/FluentUITester.xcworkspace'
      xcode_actions: 'build'
      xcode_scheme: 'ReactTestApp'
      xcode_configuration: 'Release'
      xcode_extraArgs: '-xcconfig $(Build.Repository.LocalPath)/.ado/xcconfig/publish_overrides.xcconfig'

  # iphoneos Library Debug
  - template: apple-xcode-build.yml
    parameters:
      xcode_sdk: 'iphoneos'
      xcode_workspacePath: 'apps/ios/src/FluentUITester.xcworkspace'
      xcode_actions: 'build'
      xcode_scheme: 'ReactTestApp'
      xcode_configuration: 'Debug'
      xcode_extraArgs: '-xcconfig $(Build.Repository.LocalPath)/.ado/xcconfig/publish_overrides_ios_device.xcconfig'

  # iphoneos Library Release
  - template: apple-xcode-build.yml
    parameters:
      xcode_sdk: 'iphoneos'
      xcode_workspacePath: 'apps/ios/src/FluentUITester.xcworkspace'
      xcode_actions: 'build'
      xcode_scheme: 'ReactTestApp'
      xcode_configuration: 'Release'
      xcode_extraArgs: '-xcconfig $(Build.Repository.LocalPath)/.ado/xcconfig/publish_overrides_ios_device.xcconfig'
