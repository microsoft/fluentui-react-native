# Accessibility

Accessibility means designing and creating UI that's accessible to all users, including those with disabilities.
It's important to create accessible UI so that assitive technology, like screen readers, can access information users 
need to interact with your controls. Here you can find a guide to get started as well as tools to help you test your UI 
for accessibility.

## Our Approach
FluentUI React Native enables developers to create accessible UI by providing APIs that are complimentary to Microsoft
UI Automation (UIA), an accessibility framework for Windows. Our API surface is heavily inspired by Accessible Internet Rich 
Applications (ARIA), an accessibility framework for the web. We chose to align with ARIA to provide a "web first" 
development experience. ARIA also provides a lot of guidelines and best practices for creating accessible content.

## Making UI accessible

FluentUI React Native components are accessible by default meaning you only need to provide minimal customizations to make
your UI accessible. Here you will find information on the folowing components: Properties, Roles, States, and Actions.

### Properties

#### accessible
When `true`, indicates that the view is an accessible element meaning it receives accessibility focus. By default, all 
controls are accessible. 

```tsx
<Text accessible={true}>first</Text>
<Text accessible={false}>second</Text>
```

In the above example, 'first' recieves accessiblity focus but 'second' does not. 


#### accessibilityLabel
When something is accessible, it's good practice to set an `accessiblityLabel` so the user knows what element has focus. Narrator will read out this string when the user places focus on the control.

To use, set the `accessibilityLabel` property to a custom string:

```tsx
<Button content="Click me" accessibilityLabel="Press me" />
```

In the above example, Narrator will read "Press me" instead of "Click me".

#### accessibilityHint

An accessibility hint helps users understand what will happen when they preform an action on the accessibility element when
the result isn't clear from the accessibility label.

To use, set the `accessibilityHint` property to a custom string:

```tsx
<Button content="Back" accessibilityLabel="Go Back" accessibilityHint="Navigates to the previous screen" />
```

In the above example, Narrator will read the hint after the label.

#### acceptsKeyboardFocus

When `true`, this enables the component to accept keyboard focus. 

#### accessibilityLevel, accessibiiltyPositionInSet, accessibilitySetSize

These properties are used together to define a set of items.
- ```accessibilityLevel``` defines the level of the set
- ```accessibilityPositionInSet``` defines the position of the item in a set
- ```accessibilitySetSize``` defines the number of items in a set

```tsx
<View>
  <Button content="One" accessibilityLevel={1} accessibiltyPositionInSet={1} accessibilitySetSize={2}/>
  <Button content="Two" accessibilityLevel={1} accessibiltyPositionInSet={2} accessibilitySetSize={2}/>
  <View>
    <Button content="Three" accessibilityLevel={2} accessibiltyPositionInSet={1} accessibilitySetSize={3} />
    <Button content="Four" accessibilityLevel={2} accessibiltyPositionInSet={2} accessibilitySetSize={3} />
    <Button content="Five" accessibilityLevel={2} accessibiltyPositionInSet={3} accessibilitySetSize={3} />
  </View>
</View>
```

In the above example, Narrator will read the first button as "One, 1 of 2, level 1" and the second button as "Two, 2 of 
2, level 1" and so on.

### Roles
`accessibilityRole` communicates the purpose of a component to the user.

`accessibilityRole` can be one of the following:

- **adjustable** Used when an element can be "adjusted" (e.g. a slider).
- **alert** Used when an element contains important text to be presented to the user. (note: maps to UIA Group control type)
- **alertdialog** Used to represent a dialog that contains an alert message. (note: maps to UIA Pane control type)
- **application** Used to represent a structure containing one or more focusable elements requiring user input such as keyboard or gesture events. (note: maps to UIA Pane control type)
- **button** Used when the element should be treated as a button.
- **checkbox** Used when an element represents a checkbox which can be checked, unchecked, or have mixed checked state.
- **combobox** Used when an element represents a combo box, which allows the user to select among several choices.
- **dialog** Used to represent a descendant window of a primary window of an application. (note: maps to UIA Pane control type)
- **group** Used to represent a set of user interface objects.
- **header** Used when an element acts as a header for a content section (e.g. the title of a navigation bar) (note: maps to UIA Text control type)
- **image** Used when the element should be treated as an image.
- **imagebutton** Used when the element should be treated as a button and is also an image. (note: maps to UIA Button control type)
- **keyboardkey** Used when the element acts as a keyboard key. (note: maps to UIA Button control type)
- **link** Used when the element should be treated as a link.
- **menu** Used when the component is a menu of choices.
- **menubar** Used when a component is a container of multiple menus.
- **menuitem** Used to represent an item within a menu.
- **none** Used when the element has no role. (note: maps to UIA Group control type and is removed from the control tree)
- **progressbar** Used to represent a component which indicates progress of a task.
- **presentation** Used to represent an element whose implicit native role semantics will not be mapped to the accessibility API. Synonymn is none. (note: maps to UIA Group control type and is removed from the control tree)
- **radio** Used to represent a radio button.
- **radiogroup** Used to represent a group of radio buttons. (note: maps to UIA List control type)
- **scrollbar** Used to represent a scroll bar.
- **search** Used when the text field element should also be treated as a search field (note: maps to UIA Group control type)
- **spinbutton** Used to represent a button which opens a list of choices. (note: maps to UIA Spinner control type)
- **summary** Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches. (note: maps to UIA Text control type)
- **switch** Used to represent a switch which can be turned on and off. (note: maps to UIA Button control type)
- **tab** Used to represent a tab. (note: maps to UIA Tabitem control type)
- **tablist** Used to represent a list of tabs. (note: maps to UIA Tab control type)
- **tabpanel** Used to represent a container for the resources associated with a tab, where each tab is contained in a tablist. (note: maps to UIA Pane contorl type)
- **text** Used when the element should be treated as static text that cannot change.
- **textbox** Used whent the element should be treated as a type of input that allows free-form text as its value. (note: maps to UIA Edit control type)
- **timer** Used to represent a timer. (note: maps to UIA Group control type)
- **toolbar** Used to represent a tool bar (a container of action buttons or components).
- **tree** Used to represent a list that contains sub-level nested groups that can be collapsed and expanded. 
- **treeitem** Used to represent an option item in a tree that may be expanded or collapsed if it contains a sub-level group of tree item elements.

### States

`accessibilityStates` is an array of values, and may include any of the following:

- **disabled** Used when the element is disabled and cannot be interacted with.	
- **checked** Used to indicate that a checkable element is currently checked.	
- **unchecked** Used to indicate that a checkable element is not currently checked.	
- **mixed** Used to indicate that a checkable element is in a mixed state.
- **expanded** Used to indicate that an expandable element is currently expanded.
- **selected** Used when the element is in a selected state.
- **required** Used to indicate that selection is required for a group of elements.
- **multiselectable** Used to indicate that multiple items can be selected from a group.

To use, set the `accessibilityStates` to an array containing the list of current states.

### Actions

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. In order to support accessibility actions, a component must do two things:

- Define the list of actions it supports via the `accessibilityActions` property.
- Implement an `onAccessibilityAction` function to handle action requests.

The `accessibilityActions` property should contain a list of action objects. Each action object should contain the following fields:

| Name  | Type   | Required |
| ----- | ------ | -------- |
| name  | string | Yes      |
| label | string | No       |

Actions either represent standard actions, such as clicking a button or adjusting a slider, or custom actions specific to a given component such as deleting an email message. The `name` field is required for both standard and custom actions, but `label` is optional for standard actions.

When adding support for standard actions, `name` must be one of the following:

- `'Expand'` - Displays all child nodes, controls, or content of the control.
- `'Collapse'` - Hides all child nodes, controls, or content of this element.
- `'Select'` - Deselects any selected items and then selects the current element.
- `'AddToSelection'` - Adds the current element to the collection of selected items.
- `'RemoveFromSelection'` - Removes the current element from the collection of selected items.
- `'Toggle'` - Cycles through the toggle states of a control.

Note: These are the only standard actions we have support for at this time. When new actions are added, they will be updated here.

The `label` field is optional for standard actions, and is often unused by assistive technologies. For custom actions, it is a localized string containing a description of the action to be presented to the user.

To handle action requests, a component must implement an `onAccessibilityAction` function. The only argument to this function is an event containing the name of the action to perform. The below example shows how to use standard actions.

```tsx
<View
  accessible={true}
  accessibilityActions={[
    {name: 'Expand'},
    {name: 'Collapse'},
  ]}
  onAccessibilityAction={(event) => {
    switch (event.nativeEvent.actionName) {
      case 'Expand':
        Alert.alert('Alert', 'Expand action success');
        break;
      case 'Collapse':
        Alert.alert('Alert', 'Collapse action success');
        break;
  }}
/>
```

## Testing

To test your application with Narrator, visit the complete guide to Narrator: https://support.microsoft.com/en-us/help/22798/windows-10-complete-guide-to-narrator

To test your application wiht Accessibility Insights, visit Accessibility Insights for Windows: https://accessibilityinsights.io/docs/en/windows/overview

## Checklist
- Is the control marked as accessible?
- Does the control acceptKeyboardFocus?
- Does the control have the correct accessibilityRole set?
- Does the control have the correct acccessibilityStates set?
- Does the control have the correct accessibilityActions set?
- Does the control include appropriate customizations (accessibilityLabel, accessibilityHint, etc.)?
- Try testing it with Narrator. Does narrator annouce the control correctly? When interacting with it, does it have the correct behavior?
- Try testing it with AccessibilityInsights. Does the control expose the correct UIA patterns? Does the control reflect the right properties, role, states and actions?
